<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>BRBRT — Official Token Supply & Transparency Statement</title>
  <meta name="description" content="BRBRT official token supply & transparency statement. Fixed supply, no minting, no proxy, on-chain locks, roadmap-based allocation." />
  <meta name="robots" content="index,follow,max-image-preview:large" />

  <style>
    :root{
      --bg:#07110D;
      --panel:rgba(255,255,255,.06);
      --panel2:rgba(255,255,255,.04);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.72);
      --faint:rgba(255,255,255,.55);
      --line:rgba(255,255,255,.10);
      --accent:#19d38b;
      --shadow: 0 16px 40px rgba(0,0,0,.40);
      --radius:18px;
      --radius2:24px;
      --max: 1080px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";

      /* Pie palette (premium on dark) */
      --c-locked:#19d38b;      /* green */
      --c-liquidity:#22c7ff;   /* cyan */
      --c-infra:#8a7dff;       /* violet */
      --c-marketing:#ffb020;   /* amber */
      --c-team:#ff5ad6;        /* pink */
      --c-public:#e7edf4;      /* off-white */
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(25,211,139,.12), transparent 60%),
        radial-gradient(900px 600px at 85% 30%, rgba(34,199,255,.10), transparent 55%),
        radial-gradient(800px 600px at 50% 110%, rgba(255,255,255,.05), transparent 55%),
        var(--bg);
      line-height:1.55;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    a{color:var(--text); text-decoration:none}
    a:hover{opacity:.9; text-decoration:underline}
    .wrap{max-width:var(--max); margin:0 auto; padding:28px 18px 64px}

    header{
      margin-top:10px;
      padding:28px 22px;
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    header:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(520px 280px at 20% 0%, rgba(25,211,139,.20), transparent 60%),
        radial-gradient(520px 280px at 90% 40%, rgba(34,199,255,.12), transparent 65%);
      pointer-events:none;
    }
    header > *{position:relative}
    .kicker{
      display:flex; flex-wrap:wrap; gap:10px;
      font-size:13px; color:var(--muted);
      align-items:center;
    }
    .pill{
      border:1px solid var(--line);
      background:rgba(0,0,0,.22);
      padding:6px 10px;
      border-radius:999px;
      display:inline-flex; gap:8px; align-items:center;
      backdrop-filter: blur(6px);
    }
    .dot{width:8px; height:8px; border-radius:999px; background:var(--accent); display:inline-block}
    h1{
      margin:14px 0 8px;
      font-size:34px;
      letter-spacing:-.02em;
      line-height:1.15;
    }
    .sub{
      color:var(--muted);
      font-size:16px;
      margin:0 0 14px;
      max-width: 74ch;
    }
    .meta{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }
    .meta code{
      font-family:var(--mono);
      font-size:12px;
      color:var(--text);
      background:rgba(255,255,255,.06);
      border:1px solid var(--line);
      padding:4px 8px;
      border-radius:10px;
    }
    nav{
      margin:18px 0 0;
      display:flex; flex-wrap:wrap; gap:10px;
    }
    nav a{
      font-size:13px;
      color:var(--muted);
      border:1px solid var(--line);
      padding:8px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.03);
    }
    nav a:hover{color:var(--text); text-decoration:none}

    .grid{
      display:grid;
      grid-template-columns:repeat(12, 1fr);
      gap:14px;
      margin-top:18px;
    }
    .card{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border-radius:var(--radius);
      padding:16px 16px;
      box-shadow: 0 10px 26px rgba(0,0,0,.22);
      backdrop-filter: blur(6px);
    }
    .card h2{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:-.01em;
    }
    .card p{margin:0; color:var(--muted)}
    .span-6{grid-column: span 6}
    .span-7{grid-column: span 7}
    .span-5{grid-column: span 5}
    .span-4{grid-column: span 4}
    .span-8{grid-column: span 8}
    .span-12{grid-column: span 12}

    @media (max-width: 860px){
      .span-6,.span-7,.span-5,.span-4,.span-8{grid-column: span 12}
      h1{font-size:28px}
    }

    .big{
      font-size:44px;
      font-weight:800;
      letter-spacing:-.03em;
      margin:4px 0 0;
      color:var(--accent);
    }
    .label{
      color:var(--faint);
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.12em;
    }
    .two{display:grid; gap:10px}
    .row{
      display:flex; justify-content:space-between; gap:10px;
      border-top:1px solid var(--line);
      padding-top:10px;
      margin-top:10px;
      color:var(--muted);
      font-size:14px;
    }
    .row strong{color:var(--text); font-weight:700}
    .list{margin:8px 0 0; padding:0 0 0 18px; color:var(--muted)}
    .list li{margin:6px 0}
    .ok{
      display:flex; gap:10px; align-items:flex-start;
      margin:8px 0;
      color:var(--muted);
    }
    .tick{
      width:22px; height:22px; border-radius:8px;
      background:rgba(25,211,139,.12);
      border:1px solid rgba(25,211,139,.35);
      display:inline-flex; align-items:center; justify-content:center;
      color:var(--accent);
      flex:0 0 auto;
      font-weight:900;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(0,0,0,.18);
    }
    th, td{
      padding:12px 12px;
      text-align:left;
      border-bottom:1px solid var(--line);
      font-size:14px;
      color:var(--muted);
      vertical-align: top;
    }
    th{
      color:var(--text);
      background:rgba(255,255,255,.04);
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:.10em;
    }
    tr:last-child td{border-bottom:none}
    .mono{font-family:var(--mono)}
    .divider{height:1px; background:var(--line); margin:14px 0}
    .footer{
      margin-top:22px;
      padding:18px 16px;
      border:1px solid var(--line);
      border-radius:var(--radius2);
      background:rgba(255,255,255,.03);
      color:var(--muted);
      backdrop-filter: blur(6px);
    }
    .center{text-align:center; padding:30px 12px}
    .center h3{margin:0 0 8px; font-size:22px; letter-spacing:-.02em}
    .center p{margin:0; color:var(--muted)}
    .cta{
      margin-top:14px;
      display:inline-flex;
      gap:10px;
      align-items:center;
      border-radius:999px;
      padding:10px 14px;
      border:1px solid rgba(25,211,139,.35);
      background:rgba(25,211,139,.10);
      color:var(--text);
    }
    .cta:hover{text-decoration:none; opacity:.95}
    .small{font-size:12px; color:var(--faint); margin-top:10px}

    /* Allocation Overview layout */
    .alloc-wrap{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap:16px;
      align-items:start;
    }
    @media (max-width: 980px){
      .alloc-wrap{grid-template-columns: 1fr}
    }

    /* SVG Pie container */
    .pieBox{
      width: 100%;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      box-shadow: 0 20px 50px rgba(0,0,0,.35);
      padding: 14px;
    }
    #allocPie{width:100%; height:auto; display:block}

    .pie-slice{
      stroke: rgba(0,0,0,.35);
      stroke-width: 2;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }

    /* Labels inside slices */
    .pie-label{
      font-family: var(--sans);
      font-weight: 900;
      fill: rgba(255,255,255,.96);
      paint-order: stroke;
      stroke: rgba(0,0,0,.60);
      stroke-width: 4px;
      stroke-linejoin: round;
      pointer-events: none;
      letter-spacing: -0.01em;
    }
    .pie-sub{
      font-family: var(--mono);
      font-weight: 800;
      fill: rgba(255,255,255,.92);
      paint-order: stroke;
      stroke: rgba(0,0,0,.60);
      stroke-width: 4px;
      stroke-linejoin: round;
      pointer-events: none;
    }

    /* Connector labels (for small slices) */
    .pie-line{
      stroke: rgba(255,255,255,.45);
      stroke-width: 2;
      opacity: .9;
    }
    .pie-out{
      font-family: var(--sans);
      font-weight: 900;
      fill: rgba(255,255,255,.95);
      paint-order: stroke;
      stroke: rgba(0,0,0,.65);
      stroke-width: 4px;
      stroke-linejoin: round;
      pointer-events: none;
    }
    .pie-out-sub{
      font-family: var(--mono);
      font-weight: 800;
      fill: rgba(255,255,255,.90);
      paint-order: stroke;
      stroke: rgba(0,0,0,.65);
      stroke-width: 4px;
      stroke-linejoin: round;
      pointer-events: none;
    }

    /* Legend cards */
    .legend{
      display:grid;
      gap:10px;
    }
    .legend .item{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .legend .left{
      display:flex; align-items:flex-start; gap:10px;
      min-width: 0;
    }
    .swatch{
      width:14px; height:14px;
      border-radius:6px;
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 10px 20px rgba(0,0,0,.25);
      flex:0 0 auto;
      margin-top: 2px;
    }
    .legend .name{
      color:var(--text);
      font-weight:750;
      font-size:13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 46ch;
    }
    .legend .desc{
      color:var(--muted);
      font-size:12px;
      margin-top:2px;
      max-width: 64ch;
    }
    .legend .right{
      font-family:var(--mono);
      color:var(--text);
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      flex:0 0 auto;
      margin-top: 1px;
      white-space: nowrap;
    }

    /* Small highlight callout */
    .callout{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 16px;
      padding: 12px;
      color: var(--muted);
    }
    .callout strong{color:var(--text)}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="kicker">
        <span class="pill"><span class="dot"></span> Locked &amp; Verified</span>
        <span class="pill">Classification: Professional Exchange Review</span>
        <span class="pill">Purpose: Community Trust &amp; Market Clarity</span>
      </div>

      <h1>Token Supply &amp; Transparency Statement</h1>
      <p class="sub">
        Issued by <strong>BRBRT Team</strong> — Official on-chain supply clarity and allocation structure.
      </p>

      <div class="meta">
        <span>Date: <code>23/01/2026</code></span>
        <span>Document Ref: <code>BRBRT-DOC-2026</code></span>
        <span>Status: <code>Official</code></span>
      </div>

      <nav aria-label="On-page navigation">
        <a href="#supply">Supply Facts</a>
        <a href="#control">Project Control</a>
        <a href="#allocation">Allocation Overview</a>
        <a href="#locked">Locked Tokens</a>
        <a href="#guarantees">Guarantees</a>
        <a href="#roadmap">Vision &amp; Roadmap</a>
        <a href="#cex">CEX Pack</a>
      </nav>
    </header>

    <!-- SUPPLY FACTS -->
    <section id="supply" class="grid" style="margin-top:16px">
      <div class="card span-6">
        <div class="label">Supply Data</div>
        <div class="two">
          <div>
            <div class="label" style="margin-top:10px">Max Supply</div>
            <div class="big">1,000,000</div>
          </div>
          <div class="divider"></div>
          <div>
            <div class="label">Total Supply</div>
            <div class="big" style="font-size:40px">1,000,000</div>
            <p class="small">The supply cannot increase. Everything is on-chain.</p>
          </div>
        </div>
      </div>

      <div class="card span-6">
        <div class="label">Security Protocol</div>

        <div class="ok"><span class="tick">✓</span>
          <div><strong>Minting Disabled</strong><br/><span class="small">Functionality permanently removed.</span></div>
        </div>
        <div class="ok"><span class="tick">✓</span>
          <div><strong>No Hidden Supply</strong><br/><span class="small">100% visible on explorer.</span></div>
        </div>
        <div class="ok"><span class="tick">✓</span>
          <div><strong>No Proxy / Upgrades</strong><br/><span class="small">Contract logic is immutable.</span></div>
        </div>
        <!-- sentence removed as requested -->
      </div>
    </section>

    <!-- PROJECT CONTROL -->
    <section id="control" class="grid">
      <div class="card span-5">
        <div class="label">Project Control Overview</div>
        <div class="big">74.6%</div>
        <p class="small">Controlled by project (structured allocation and milestone-based distribution).</p>
      </div>

      <div class="card span-7">
        <div class="label">Fully transparent &amp; publicly traceable</div>
        <ul class="list">
          <li><strong>Structured for Stability</strong> — No random dumps.</li>
          <li><strong>Responsible Growth</strong> — Aligned with adoption.</li>
          <li><strong>Roadmap Alignment</strong> — Unlocked only for milestones.</li>
        </ul>
      </div>
    </section>

    <!-- ALLOCATION OVERVIEW (POWERFUL PIE: labels per slice + connectors for small slices) -->
    <section id="allocation" class="grid" aria-label="Allocation Overview">
      <div class="card span-12">
        <h2>Allocation Overview</h2>
        <p class="small" style="margin:0">
          Total supply: <strong>1,000,000 BRBRT</strong>. Every allocation is designed for clarity, stability, and long-term execution.
        </p>

        <div class="divider"></div>

        <div class="alloc-wrap">
          <div class="pieBox">
            <svg id="allocPie" viewBox="0 0 520 520" role="img" aria-label="BRBRT allocation pie chart"></svg>
            <div class="small" style="margin-top:10px">
              Labels are placed on slices. Small allocations use connector labels for maximum readability.
            </div>
          </div>

          <div class="legend" aria-label="Allocation Legend">
            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-locked)"></span>
                <div>
                  <div class="name">Locked (PinkLock V2)</div>
                  <div class="desc">On-chain secured lock (team cannot move/sell).</div>
                </div>
              </div>
              <div class="right">27.99%</div>
            </div>

            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-liquidity)"></span>
                <div>
                  <div class="name">Listings &amp; Liquidity</div>
                  <div class="desc">Reserved for CEX, market making, order book stability.</div>
                </div>
              </div>
              <div class="right">27.99%</div>
            </div>

            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-infra)"></span>
                <div>
                  <div class="name">Infrastructure &amp; Development</div>
                  <div class="desc">Supportive web, content systems, future game (future launch).</div>
                </div>
              </div>
              <div class="right">10.00%</div>
            </div>

            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-marketing)"></span>
                <div>
                  <div class="name">Marketing</div>
                  <div class="desc">Education, awareness, partnerships, growth initiatives.</div>
                </div>
              </div>
              <div class="right">5.00%</div>
            </div>

            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-team)"></span>
                <div>
                  <div class="name">Team / DAO</div>
                  <div class="desc">Long-term incentives, DAO experimentation, governance.</div>
                </div>
              </div>
              <div class="right">3.66%</div>
            </div>

            <div class="item">
              <div class="left">
                <span class="swatch" style="background:var(--c-public)"></span>
                <div>
                  <div class="name">Public / Circulating</div>
                  <div class="desc">Public supply in circulation.</div>
                </div>
              </div>
              <div class="right">25.36%</div>
            </div>

            <div class="callout">
              <strong>On-chain Lock Record:</strong>
              <div class="mono" style="margin-top:6px; word-break: break-word;">
                pinksale.finance/pinklock/bsc/record/1437618
              </div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <table aria-label="Supply Transparency Summary">
          <thead>
            <tr>
              <th>Bucket</th>
              <th>Allocation</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Locked (PinkLock V2)</td>
              <td class="mono">27.99%</td>
              <td>On-chain secured lock (team cannot move/sell).</td>
            </tr>
            <tr>
              <td>Listings &amp; Liquidity</td>
              <td class="mono">27.99%</td>
              <td>Reserved for CEX / market making / order book stability.</td>
            </tr>
            <tr>
              <td>Infrastructure &amp; Development</td>
              <td class="mono">10.00%</td>
              <td>Supportive web, content systems, future game (future launch).</td>
            </tr>
            <tr>
              <td>Marketing</td>
              <td class="mono">5.00%</td>
              <td>Education, awareness, partnerships, growth initiatives.</td>
            </tr>
            <tr>
              <td>Team / DAO</td>
              <td class="mono">3.66%</td>
              <td>Long-term incentives, DAO experimentation, community governance.</td>
            </tr>
            <tr>
              <td>Public / Circulating</td>
              <td class="mono">25.36%</td>
              <td>Public supply in circulation.</td>
            </tr>
          </tbody>
        </table>

        <p class="small" style="margin-top:10px">
          Note: “Project controlled” figure is shown as <strong>74.6%</strong> in the official overview.
        </p>
      </div>
    </section>

    <!-- LOCKED TOKENS -->
    <section id="locked" class="grid">
      <div class="card span-6">
        <div class="label">Locked Tokens</div>
        <div class="big">27.99%</div>
        <p class="small">
          On-chain secured — Platform: <strong>PinkLock V2</strong>
        </p>
      </div>

      <div class="card span-6">
        <div class="label">Verification Record</div>
        <p class="small" style="margin:0">
          Tokens are mathematically locked and cannot be moved or sold by the team.
        </p>
        <div class="row">
          <span>Record</span>
          <strong class="mono">pinksale.finance/pinklock/bsc/record/1437618</strong>
        </div>
        <ul class="list" style="margin-top:10px">
          <li>Holder Protection</li>
          <li>Supply Stability</li>
          <li>Long-term Commitment</li>
        </ul>
      </div>
    </section>

    <!-- GUARANTEES -->
    <section id="guarantees" class="grid">
      <div class="card span-6">
        <h2>Structural Guarantees</h2>
        <p class="small">Designed for long-term sustainability, not short-term speculation.</p>
      </div>

      <div class="card span-3">
        <div class="label">Technical</div>
        <ul class="list">
          <li>Fixed Supply</li>
          <li>No Mint Function</li>
          <li>No Proxy Contracts</li>
        </ul>
      </div>

      <div class="card span-3">
        <div class="label">Operational</div>
        <ul class="list">
          <li>Public Wallets</li>
          <li>On-chain Locks</li>
          <li>Roadmap-based Allocation</li>
        </ul>
      </div>
    </section>

    <!-- ROADMAP -->
    <section id="roadmap" class="grid">
      <div class="card span-6">
        <h2>Vision &amp; Roadmap Alignment</h2>
        <div class="label">Driven by values</div>
        <p class="small">
          BRBRT is built from a real story, driven by resilience, dignity, and awareness.
        </p>
        <ul class="list">
          <li>Community Safety</li>
          <li>Anti-bullying Awareness</li>
          <li>Transparent Funding Goals</li>
          <li>No Financial Profit Promises</li>
        </ul>
      </div>

      <div class="card span-6">
        <div class="label">Phases</div>
        <ul class="list">
          <li><strong>Phase 01 — Foundations</strong>: Brand upgrades, official verifications, transparency page.</li>
          <li><strong>Phase 02 — Growth</strong>: Story drops, community tools, safe space events.</li>
          <li><strong>Phase 03 — Impact</strong>: Supportive web hub, association page, animated series.</li>
          <li><strong>Phase 04 — Sustainability</strong>: Global awareness, long-term governance.</li>
        </ul>
      </div>
    </section>

    <!-- CEX PACK -->
    <section id="cex" class="grid">
      <div class="card span-12">
        <h2>CEX Transparency Pack</h2>
        <p class="small">
          This document serves as the institutional-grade transparency summary for exchange due diligence.
        </p>

        <div class="grid" style="margin-top:10px">
          <div class="card span-3" style="box-shadow:none; background:rgba(255,255,255,.03)">
            <h2>Fixed Supply Proof</h2>
            <p>Immutable contract.</p>
          </div>
          <div class="card span-3" style="box-shadow:none; background:rgba(255,255,255,.03)">
            <h2>PinkLock Proof</h2>
            <p>On-chain record.</p>
          </div>
          <div class="card span-3" style="box-shadow:none; background:rgba(255,255,255,.03)">
            <h2>Allocation Logic</h2>
            <p>Clear breakdown.</p>
          </div>
          <div class="card span-3" style="box-shadow:none; background:rgba(255,255,255,.03)">
            <h2>Roadmap Alignment</h2>
            <p>Strategic plan.</p>
          </div>
        </div>

        <p class="small" style="margin-top:12px">
          Suggested subject line: <span class="mono">“BRBRT — Token Supply Transparency &amp; Long-Term Structure”</span>
        </p>
      </div>
    </section>

    <section class="footer center" aria-label="Final Statement">
      <h3>Everything is on-chain. Everything is structured.</h3>
      <p>Nothing is hidden.</p>
      <a class="cta" href="/" aria-label="Back to BRBRT home">
        brbrt.com <span aria-hidden="true">→</span>
      </a>
      <p class="small">— BRBRT Team —</p>
    </section>
  </div>

  <script>
    (function(){
      // Data (must match your official breakdown)
      const data = [
        { name: "Locked",         value: 27.99, colorVar: "--c-locked" },
        { name: "Liquidity",      value: 27.99, colorVar: "--c-liquidity" },
        { name: "Infrastructure", value: 10.00, colorVar: "--c-infra" },
        { name: "Marketing",      value: 5.00,  colorVar: "--c-marketing" },
        { name: "Team/DAO",       value: 3.66,  colorVar: "--c-team" },
        { name: "Public",         value: 25.36, colorVar: "--c-public" }
      ];

      const svg = document.getElementById("allocPie");
      if(!svg) return;

      const W = 520, H = 520;
      const cx = W/2, cy = H/2;

      const r  = 190;   // pie radius
      const lr = 125;   // label radius (inside)
      const outR1 = r + 18; // connector start
      const outR2 = r + 54; // connector end

      const total = data.reduce((a,b)=>a+b.value,0);
      const css = getComputedStyle(document.documentElement);

      // background glow / depth
      svg.innerHTML = `
        <defs>
          <radialGradient id="pieGlow" cx="35%" cy="25%" r="80%">
            <stop offset="0%" stop-color="rgba(255,255,255,.18)"/>
            <stop offset="55%" stop-color="rgba(255,255,255,.07)"/>
            <stop offset="100%" stop-color="rgba(0,0,0,.10)"/>
          </radialGradient>
        </defs>
        <circle cx="${cx}" cy="${cy}" r="${r+8}" fill="url(#pieGlow)" opacity="0.75"></circle>
      `;

      let angle = -Math.PI / 2; // start at top

      data.forEach(d => {
        const sliceAngle = (d.value / total) * Math.PI * 2;
        const a0 = angle;
        const a1 = angle + sliceAngle;

        const x0 = cx + r * Math.cos(a0);
        const y0 = cy + r * Math.sin(a0);
        const x1 = cx + r * Math.cos(a1);
        const y1 = cy + r * Math.sin(a1);

        const largeArc = sliceAngle > Math.PI ? 1 : 0;
        const color = (css.getPropertyValue(d.colorVar).trim() || "#19d38b");

        const path = el("path");
        path.setAttribute("d", [
          `M ${cx} ${cy}`,
          `L ${x0} ${y0}`,
          `A ${r} ${r} 0 ${largeArc} 1 ${x1} ${y1}`,
          "Z"
        ].join(" "));
        path.setAttribute("fill", color);
        path.setAttribute("class", "pie-slice");
        svg.appendChild(path);

        // Midpoint angle for label placement
        const mid = (a0 + a1) / 2;

        // For small slices: push label outside with connector
        const isSmall = d.value < 6.0;

        if(!isSmall){
          const lx = cx + lr * Math.cos(mid);
          const ly = cy + lr * Math.sin(mid);

          const size = d.value < 11 ? 16 : 17;
          const subSize = 13;

          const text = el("text");
          text.setAttribute("x", lx);
          text.setAttribute("y", ly);
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("dominant-baseline", "middle");
          text.setAttribute("class", "pie-label");
          text.setAttribute("style", `font-size:${size}px;`);

          const t1 = el("tspan");
          t1.textContent = d.name;
          t1.setAttribute("x", lx);
          t1.setAttribute("dy", "-0.15em");

          const t2 = el("tspan");
          t2.textContent = `${d.value.toFixed(2)}%`;
          t2.setAttribute("x", lx);
          t2.setAttribute("dy", "1.20em");
          t2.setAttribute("class", "pie-sub");
          t2.setAttribute("style", `font-size:${subSize}px;`);

          text.appendChild(t1);
          text.appendChild(t2);
          svg.appendChild(text);
        } else {
          // Connector points
          const xA = cx + outR1 * Math.cos(mid);
          const yA = cy + outR1 * Math.sin(mid);
          const xB = cx + outR2 * Math.cos(mid);
          const yB = cy + outR2 * Math.sin(mid);

          // little horizontal offset so label doesn't sit on the line
          const side = Math.cos(mid) >= 0 ? 1 : -1;
          const xC = xB + side * 22;
          const yC = yB;

          const line = el("path");
          line.setAttribute("d", `M ${xA} ${yA} L ${xB} ${yB} L ${xC} ${yC}`);
          line.setAttribute("class", "pie-line");
          svg.appendChild(line);

          const text = el("text");
          text.setAttribute("x", xC + side * 6);
          text.setAttribute("y", yC);
          text.setAttribute("text-anchor", side === 1 ? "start" : "end");
          text.setAttribute("dominant-baseline", "middle");
          text.setAttribute("class", "pie-out");
          text.setAttribute("style", "font-size:15px;");

          const t1 = el("tspan");
          t1.textContent = d.name;
          t1.setAttribute("x", xC + side * 6);
          t1.setAttribute("dy", "-0.15em");

          const t2 = el("tspan");
          t2.textContent = `${d.value.toFixed(2)}%`;
          t2.setAttribute("x", xC + side * 6);
          t2.setAttribute("dy", "1.20em");
          t2.setAttribute("class", "pie-out-sub");
          t2.setAttribute("style", "font-size:12px;");

          text.appendChild(t1);
          text.appendChild(t2);
          svg.appendChild(text);
        }

        angle = a1;
      });

      // Outer ring for crisp edge
      const ring = el("circle");
      ring.setAttribute("cx", cx);
      ring.setAttribute("cy", cy);
      ring.setAttribute("r", r);
      ring.setAttribute("fill", "none");
      ring.setAttribute("stroke", "rgba(255,255,255,.12)");
      ring.setAttribute("stroke-width", "2");
      svg.appendChild(ring);

      function el(tag){
        return document.createElementNS("http://www.w3.org/2000/svg", tag);
      }
    })();
  </script>
</body>
</html>
